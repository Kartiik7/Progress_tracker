/* --- Main Page & Header --- */
.page {
  padding: 2rem;
  height: 100%;
  overflow-y: auto;
}

.header {
  margin-bottom: 2rem;
  text-align: center;
}

.title {
  font-size: 2.25rem;
  font-weight: 800;
  color: var(--text-bright);
}

.content {
  max-width: 1200px;
  margin: 0 auto;
}

/* --- Responsive Grid Layout for Stat Boxes --- */
.statsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.statCard {
  background-color: var(--bg-secondary);
  border-radius: 0.75rem;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  border: 1px solid var(--border-color);
}

.statCard:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
}

.statTitle {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-secondary);
}

.statValue {
  font-size: 2.5rem;
  font-weight: 800;
  color: var(--text-bright);
}

.statValueSmall {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-primary);
}

.difficultyHeader {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}

.progressBar {
  width: 100%;
  height: 8px;
  background-color: var(--border-color);
  border-radius: 9999px;
  overflow: hidden;
  margin-top: 0.5rem;
}

.progressFill {
  height: 100%;
  border-radius: 9999px;
  transition: width 0.5s ease-in-out;
}

/* --- FINAL HEATMAP STYLES --- */
.heatmapWrapper {
  background-color: var(--bg-secondary);
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-top: 2rem;
  overflow-x: auto;
  border: 1px solid var(--border-color);
}

.heatmapTitle {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-bright);
  margin-bottom: 1rem;
}

.heatmapContainer {
  display: block; /* changed inline-block to block for separate months */
}

.heatmapDays {
  display: grid;
  grid-template-columns: repeat(7, 14px);
  gap: 4px;
  font-size: 0.7rem;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.heatmapCells {
  display: grid;
  grid-template-columns: repeat(7, 14px);
  grid-auto-rows: 14px;
  gap: 4px;
}

.heatmapCell {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  background-color: var(--bg-tertiary);
  border: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent);
}
.heatmapCell:not([style*="visibility: hidden"]):hover {
  border: 1px solid var(--text-primary);
}

/* --- Theme-Aware Color Levels --- */
.level0 { background-color: var(--bg-tertiary); }

html[data-theme='light'] .level1 { background-color: #9be9a8; border: none; }
html[data-theme='light'] .level2 { background-color: #40c463; border: none; }
html[data-theme='light'] .level3 { background-color: #30a14e; border: none; }
html[data-theme='light'] .level4 { background-color: #216e39; border: none; }

html[data-theme='dark'] .level1 { background-color: #0e4429; border: none; }
html[data-theme='dark'] .level2 { background-color: #006d32; border: none; }
html[data-theme='dark'] .level3 { background-color: #26a641; border: none; }
html[data-theme='dark'] .level4 { background-color: #39d353; border: none; }

/* --- States (Loading, Error, Empty) --- */
.emptyState, .loading {
  text-align: center; padding: 4rem 1rem; background-color: var(--bg-secondary); border-radius: 0.75rem; color: var(--text-secondary);
}
.emptyState h2 { font-size: 1.5rem; font-weight: 700; color: var(--text-bright); }
.emptyState p { margin-top: 0.5rem; }
.settingsLink { display: inline-block; margin-top: 1.5rem; padding: 0.75rem 1.5rem; background-color: var(--accent-primary); color: white; border-radius: 0.5rem; text-decoration: none; font-weight: 600; transition: background-color 0.2s; }
.settingsLink:hover { background-color: var(--accent-primary-hover); }
.skeleton { background-color: var(--bg-tertiary); border: 1px solid var(--border-color); animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; min-height: 120px; }
@keyframes pulse { 50% { opacity: .5; } }